<html>
<head>
<meta charset="utf-8"><!--converting machine readable code-->
<meta content="IE-edge" http-equiv="X-UA-Compatible">
<meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta content="width=device-width, intial-scale=1.0" name="viewport">
<title>Shopping Website</title>
<link rel="stylesheet" href="dist/css/bootstrap.css">
<link rel="stylesheet" href="style.css">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    



<!--fav-icon---------------->

	<!--style----->
	<style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');
  
</style>
	
</head>
<body>
	<div class="container-fluid">
	<nav> 
		<!--social-links-and-phone-number----------------->
 <div class="social-call" style="background-color: #0b9d8a;">
	 <!--social-links--->
	 <div class="social">
		 <a href="#"><i class="fab fa-facebook-f"></i></a>
		 <a href="#"><i class="fab fa-twitter"></i></a>
		 <a href="#"><i class="fab fa-youtube"></i></a>
		 <a href="#"><i class="fab fa-instagram"></i></a>
	 </div>
	 <!--phone-number------>
	 <div class="phone">
		 <span>Call: +123456789</span>
	 </div>
 </div>
 <!--menu-bar----------------------------------------->
 <div class="navigation">
	 <!--logo------------>
	 <div>
		<a href="#" class="logo"><img src="images/logo.png"></a>
		<div><strong style="color: #0b9d8a;font-size:20px;float:left"> PlantLUX</strong></div>
		
	 </div>
	 <!--menu-icon------------->
	 
	 <!--right-menu----------->
	 <div class="right-menu">
		 <!--<a href="javascript:void(0);" class="user">
			 <i class="far fa-user"></i>
		 </a>--->
		 <a href="#">
			 <i class="fas fa-shopping-cart">
				 <span class="num-cart-product">0</span>
			 </i>
		 </a>
	 </div>
	 </div>
 </nav>
</div>

<!----------------------------------------------------------------->
<div class="container"> 
<nav aria-label="breadcrumb">
	<ol class="breadcrumb">
	  <li class="breadcrumb-item nav-item" style="color:gray;"><a href="#">Home</a></li>
	  <li class="breadcrumb-item active" style="color: #0b9d8a;" aria-current="page">Flowering Plants</li>
	</ol>
  </nav>
</div>
  
  
  <!------------------------------------------------------->
<div class="container">
  <div class="jumbotron">
	<h5 class="">Checkout</h5>
	<div class="row">
	<div class="col-12">
	<div style="float: left;">
	<a href="#" style="color: #0b9d8a;">
		<i class="fas fa-map-marker-alt" style="color: #0b9d8a;"></i> Delivery information
	</a>
	</div>
	<div style="float: right;">
		
		<button  style="color: #0b9d8a;" type="button" class="btn btn-link nav-link" data-toggle="modal" data-target="#exampleModal">EDIT</button>
		</div>
	</div>
</div>
	<div> 
	<p class="lead" id="address" style="font-size:15px;"></p>
	<form>
		<div class="row">
		<div class="form-group col-12 col-md-6">
		  <label for="phone" class="col-form-label" style="color: #0b9d8a;"><i class="fas fa-phone"></i> Phone Number</label>
		  <input class="form-control" id="phonee" required>
		</div>
	  
	  <div class="form-group col-12 col-md-6">
		<label for="email" class="col-form-label" style="color: #0b9d8a;"><i class="fas fa-envelope-open-text"></i> Email Address</label>
		<input type="text" class="form-control" id="email" required>
	  </div>
	</div>
	</form>
	</div>
	<hr class="my-4">
	<a href="#" style="color: #0b9d8a;">
		<i class="fas fa-seedling" style="color: #0b9d8a;"></i> Items
	</a>
	<!----item-->
	{{#if result}}
    {{#each result}}
	<div class="row" style="margin-top:15px;">
	<div class="col-4">
		<img src="{{{this.image}}}" style="width:100px;height:100px" alt="">
		<h6>{{this.description}}</h6>
		<h6>Rs.{{this.price}}.00</h6>
	</div>
	<div class="col-4">
		<div class="btn-group mr-2" role="group" aria-label="Second group">
			<button id="subtract" type="button" class="btn btn-outline-success">-</button>
			<button id="qty" type="button" class="btn btn-outline-success" disabled>1</button>
			<button id="add" type="button" class="btn btn-outline-success">+</button>
		  </div>
		  <div class="col-12">
				<p>Qty</p>
		  </div>
	</div>
	<div class="col-4" style="float:left">
		
			<p id="total" style="float:right">Subtotal:    Rs.{{this.price}}.00</p>
	  

	</div>

	</div>
	{{/each}}
  {{/if}}

	<!----------->
	<hr class="my-4">
	<div class="row">
		<div class="col-9" style="float:right">Shipping Fee</div>
		<div class="col-3" style="float:left"><p id="ship" style="float:right">----</p></div>

	</div>

	<!--shipping fee-->
	<hr class="my-4">
	
	<!----->
	
	<div class="row" style="margin-top: 10px; margin-bottom:20px;">
		<div class="col-5"></div>
		<div class="col-7"><button style="float:right" type="button" id="place" class="btn btn-warning">Proceed to Pay</button></div>
	</div>
	
  </div>
</div> <!--end of jumbrostron-->
<!---------modal-->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
	  <div class="modal-content">
		<div class="modal-header">
		  <h5 class="modal-title" id="exampleModalLabel">Edit Delivery Address</h5>
		  <button id="cancel" type="button" class="close" data-dismiss="modal" aria-label="Close">
			<span aria-hidden="true">&times;</span>
		  </button>
		</div>
		<div class="modal-body" style="font-size:12px;">
		  <form>
			<div class="form-group">
			  <label for="full-name" class="col-form-label">Full Name</label>
			  <input type="text" class="form-control" id="full-name" required>
			</div>
			
			
			
			  <div class="form-group">
				<label for="province" class="col-form-label">Province</label>
				<select id="province" class="form-control" name="state" required>
					<option selected>Choose...</option>
					<option>Colombo</option>
					<option>Gampaha</option>
					<option>Kaluthara</option>
					<option>Galle</option>
					<option>Mathara</option>
					<option>Hambanthota</option>
					<option>Ratnapura</option>
					<option>kegalle</option>
					<option>Nuwara Eliya</option>
					<option>Kandy</option>
					<option>Matale</option>
					<option>Badulla</option>
					<option>Ampara</option>
					<option>Monaragala</option>
					<option>Jaffna</option>
					<option>Anuradhapura</option>
					<option>Polonnaruwa</option>
				  </select>
			  </div>
			  <div class="form-group">
				<label for="address" class="col-form-label">Address</label>
				<textarea class="form-control" id="addresss" required></textarea>
			  </div>
			  <div style="margin-top:10px; float:right; font-size:14px;">
			  <input type="submit" id="subad" class="btn btn-primary"  value="Save Changes" name="add">
            <button type="reset" class="btn btn-secondary" >Clear</button>
		</div>
		  </form>
		  

		</div>
		
	  </div>
	</div>
  </div>
<!---------------->



</body>
  <!--using FontAwesome--------------->
  <script crossorigin="anonymous" src="https://kit.fontawesome.com/c8e4d183c2.js"></script>
  
  <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
  <script src="jquery.js"></script>
  <script src="dist/js/bootstrap.js"></script>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>

  
</script>
<script>
	$(document).ready(function(){
		{{#if result}}
		{{#each result}}
		var item_code={{this.item_id}};
		//var item_des=String({{this.description}});
		var item_q={{this.quantity}};
		var item_price={{this.price}};
		let obj={"item_code":item_code,"item_q":item_q,"item_price":item_price,"purchase":1,"sfee":0,"method":""};
		//sessionStorage.setItem("item1",JSON.stringify(obj));
		{{/each}}
		{{/if}}
		
		$("#phonee").val(sessionStorage.getItem("phone_no"));
		$("#email").val(sessionStorage.getItem("email"));
		$("#subad").click(function(e){
			e.preventDefault();
			var e=$("#full-name").val()+","+$("#addresss").val()+","+$("#province").val();
			var c=$("#province").val();
			$("#address").text(e);
			
			$.post("/delivery",
  			{
    		district:c
  			},
  			function(data, status){
				  
				  const myobj=jQuery.parseJSON(data);
				  
				  obj.sfee=myobj.fee;
				  var d="Rs."+myobj.fee+".00";
				  $("#ship").text(d);
				 
				 // var total=parseInt(sessionStorage.getItem("item1").item_price)+parseInt(myobj.fee);
			});

			$('#cancel').click();
		});


		//----------
		$("#subtract").click(function(){
			var x=parseInt($("#qty").text());
			if(x>1)
			{
			$("#qty").text(x-1);
			var r=obj.item_price*(x-1);
			$("#total").text("Subtotal:-  Rs."+String(r)+".00");
			}
			
		});
			$("#add").click(function(){
			var x=parseInt($("#qty").text());
			if(x<obj.item_q)
			{
			$("#qty").text(x+1);
			var r=obj.item_price*(x+1);
			$("#total").text("Subtotal:-  Rs."+String(r)+".00");
			}
		});
		$("#place").click(function(){
			if($("#address").text()==",,Choose..." || $("#address").text()=="")
			{
				alert("Please Enter the shipping address before Place Order..");
			}
			else
			{
				obj.purchase=parseInt($("#qty").text());
				obj.address=$("#address").text();
				sessionStorage.setItem("item1",JSON.stringify(obj));
				
				window.location.replace("/payoption");

			}
		});
	});
</script>
  </html>